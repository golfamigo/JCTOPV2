# Minimal Dockerfile for JCTOP - Just get it working!
FROM node:18-alpine

WORKDIR /app

# Copy everything
COPY . .

# Install dependencies and build
RUN npm ci
RUN cd apps/server && npm run build

# Set working directory to server
WORKDIR /app/apps/server

EXPOSE 3000

ENV NODE_ENV=production
ENV PORT=3000

# Start the server directly
CMD ["node", "dist/main.js"]